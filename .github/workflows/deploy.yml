# Set the working directory inside the container
WORKDIR /app

# Copy the compiled binary from the builder stage
COPY --from=builder /app/target/release/earn_vault /usr/local/bin/earn_vault

# If .env file exists, copy it; otherwise, create it with default values
COPY .env .env

# Ensure .env file exists and add default variables if missing
RUN touch .env && \
    echo "DATABASE_URL=${DATABASE_URL:-postgres://user:password@host:5432/dbname}" >> .env && \
    echo "API_KEY=${API_KEY:-your-default-api-key}" >> .env
